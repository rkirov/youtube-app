{"version":3,"sources":["@traceur/generated/TemplateParser/5404","angular2/test/di/async_spec.js","@traceur/generated/TemplateParser/5412","@traceur/generated/TemplateParser/5403","@traceur/generated/TemplateParser/5402","@traceur/generated/TemplateParser/5408","@traceur/generated/TemplateParser/5411","@traceur/generated/TemplateParser/5409","angular2/test/di/@traceur/generated/TemplateParser/25","angular2/test/di/@traceur/generated/TemplateParser/24"],"names":[],"mappings":"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","file":"angular2/test/di/async_spec.js","sourceRoot":"/Users/radokirov/angular/dist/js/dev/es6/","sourcesContent":["System.register($__placeholder__0, function($__export) {\n          $__placeholder__1\n        });","import {\n  AsyncTestCompleter,\n  beforeEach,\n  ddescribe,\n  describe,\n  expect,\n  iit,\n  inject,\n  it,\n  xit,\n} from 'angular2/test_lib';\nimport {Injector, Inject, InjectPromise, bind, Key} from 'angular2/di';\nimport {Promise, PromiseWrapper} from 'angular2/src/facade/async';\n\nclass UserList {\n}\n\nfunction fetchUsers() {\n  return PromiseWrapper.resolve(new UserList());\n}\n\nclass SynchronousUserList {\n}\n\nclass UserController {\n  list:UserList;\n  constructor(list:UserList) {\n    this.list = list;\n  }\n}\n\nclass AsyncUserController {\n  userList;\n  constructor(@InjectPromise(UserList) userList) {\n    this.userList = userList;\n  }\n}\n\nexport function main() {\n  describe(\"async injection\", function () {\n\n    describe(\"asyncGet\", function () {\n      it('should return a promise', function () {\n        var injector = new Injector([\n          bind(UserList).toAsyncFactory(fetchUsers)\n        ]);\n        var p = injector.asyncGet(UserList);\n        expect(p).toBePromise();\n      });\n\n      it('should return a promise when the binding is sync', function () {\n        var injector = new Injector([\n          SynchronousUserList\n        ]);\n        var p = injector.asyncGet(SynchronousUserList);\n        expect(p).toBePromise();\n      });\n\n      it(\"should return a promise when the binding is sync (from cache)\", function () {\n        var injector = new Injector([\n          UserList\n        ]);\n        expect(injector.get(UserList)).toBeAnInstanceOf(UserList);\n        expect(injector.asyncGet(UserList)).toBePromise();\n      });\n\n      it('should return the injector', inject([AsyncTestCompleter], (async) => {\n        var injector = new Injector([]);\n        var p = injector.asyncGet(Injector);\n        p.then(function (injector) {\n          expect(injector).toBe(injector);\n          async.done();\n        });\n      }));\n\n      it('should return a promise when instantiating a sync binding ' +\n      'with an async dependency', inject([AsyncTestCompleter], (async) => {\n        var injector = new Injector([\n          bind(UserList).toAsyncFactory(fetchUsers),\n          UserController\n        ]);\n\n        injector.asyncGet(UserController).then(function (userController) {\n          expect(userController).toBeAnInstanceOf(UserController);\n          expect(userController.list).toBeAnInstanceOf(UserList);\n          async.done();\n        });\n      }));\n\n      it(\"should create only one instance (async + async)\", inject([AsyncTestCompleter], (async) => {\n        var injector = new Injector([\n          bind(UserList).toAsyncFactory(fetchUsers)\n        ]);\n\n        var ul1 = injector.asyncGet(UserList);\n        var ul2 = injector.asyncGet(UserList);\n\n        PromiseWrapper.all([ul1, ul2]).then(function (uls) {\n          expect(uls[0]).toBe(uls[1]);\n          async.done();\n        });\n      }));\n\n      it(\"should create only one instance (sync + async)\", inject([AsyncTestCompleter], (async) => {\n        var injector = new Injector([\n          UserList\n        ]);\n\n        var promise = injector.asyncGet(UserList);\n        var ul = injector.get(UserList);\n\n        expect(promise).toBePromise();\n        expect(ul).toBeAnInstanceOf(UserList);\n\n        promise.then(function (ful) {\n          expect(ful).toBe(ul);\n          async.done();\n        });\n      }));\n\n      it('should show the full path when error happens in a constructor', inject([AsyncTestCompleter], (async) => {\n        var injector = new Injector([\n          UserController,\n          bind(UserList).toAsyncFactory(function () {\n            throw \"Broken UserList\";\n          })\n        ]);\n\n        var promise = injector.asyncGet(UserController);\n        PromiseWrapper.then(promise, null, function (e) {\n          expect(e.message).toContain(\"Error during instantiation of UserList! (UserController -> UserList)\");\n          async.done();\n        });\n      }));\n    });\n\n    describe(\"get\", function () {\n      it('should throw when instantiating an async binding', function () {\n        var injector = new Injector([\n          bind(UserList).toAsyncFactory(fetchUsers)\n        ]);\n\n        expect(() => injector.get(UserList))\n          .toThrowError('Cannot instantiate UserList synchronously. It is provided as a promise!');\n      });\n\n      it('should throw when instantiating a sync binding with an dependency', function () {\n        var injector = new Injector([\n          bind(UserList).toAsyncFactory(fetchUsers),\n          UserController\n        ]);\n\n        expect(() => injector.get(UserController))\n          .toThrowError('Cannot instantiate UserList synchronously. It is provided as a promise! (UserController -> UserList)');\n      });\n\n      it('should resolve synchronously when an async dependency requested as a promise', function () {\n        var injector = new Injector([\n          bind(UserList).toAsyncFactory(fetchUsers),\n          AsyncUserController\n        ]);\n        var controller = injector.get(AsyncUserController);\n\n        expect(controller).toBeAnInstanceOf(AsyncUserController);\n        expect(controller.userList).toBePromise();\n      });\n\n      it('should wrap sync dependencies into promises if required', function () {\n        var injector = new Injector([\n          bind(UserList).toFactory(() => new UserList()),\n          AsyncUserController\n        ]);\n        var controller = injector.get(AsyncUserController);\n\n        expect(controller).toBeAnInstanceOf(AsyncUserController);\n        expect(controller.userList).toBePromise();\n      });\n    });\n  });\n}\n","\n        $__export($__placeholder__0, $__placeholder__1)\n      ","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function($__m) {\n          $__placeholder__0\n        }","$__placeholder__0 = $__m.$__placeholder__1;","$__placeholder__0 = $__placeholder__1","function() {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4);\n        }()","assert.argumentTypes($__placeholder__0)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}