{"version":3,"sources":["@traceur/generated/TemplateParser/5404","angular2/test/core/compiler/pipeline/proto_view_builder_spec.js","@traceur/generated/TemplateParser/5412","@traceur/generated/TemplateParser/5403","@traceur/generated/TemplateParser/5402","@traceur/generated/TemplateParser/5408","@traceur/generated/TemplateParser/5411","@traceur/generated/TemplateParser/5410","@traceur/generated/TemplateParser/13","angular2/test/core/compiler/pipeline/@traceur/generated/TemplateParser/25","angular2/test/core/compiler/pipeline/@traceur/generated/TemplateParser/24"],"names":[],"mappings":"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","file":"angular2/test/core/compiler/pipeline/proto_view_builder_spec.js","sourceRoot":"/Users/radokirov/angular/dist/js/dev/es6/","sourcesContent":["System.register($__placeholder__0, function($__export) {\n          $__placeholder__1\n        });","import {describe, beforeEach, it, expect, iit, ddescribe, el} from 'angular2/test_lib';\nimport {isPresent} from 'angular2/src/facade/lang';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {dynamicChangeDetection} from 'angular2/change_detection';\nimport {ElementBinder} from 'angular2/src/core/compiler/element_binder';\nimport {ProtoViewBuilder} from 'angular2/src/core/compiler/pipeline/proto_view_builder';\nimport {CompilePipeline} from 'angular2/src/core/compiler/pipeline/compile_pipeline';\nimport {CompileElement} from 'angular2/src/core/compiler/pipeline/compile_element';\nimport {CompileStep} from 'angular2/src/core/compiler/pipeline/compile_step'\nimport {CompileControl} from 'angular2/src/core/compiler/pipeline/compile_control';\nimport {NativeShadowDomStrategy} from 'angular2/src/core/compiler/shadow_dom_strategy';\nimport {MapWrapper} from 'angular2/src/facade/collection';\n\nexport function main() {\n  describe('ProtoViewBuilder', () => {\n    function createPipeline(variableBindings = null) {\n      return new CompilePipeline([new MockStep((parent, current, control) => {\n        if (isPresent(DOM.getAttribute(current.element, 'viewroot'))) {\n          current.isViewRoot = true;\n        }\n        if (isPresent(DOM.getAttribute(current.element, 'var-binding'))) {\n          current.variableBindings = MapWrapper.createFromStringMap(variableBindings);\n        }\n        current.inheritedElementBinder = new ElementBinder(0, null, 0, null, null, null);\n      }), new ProtoViewBuilder(dynamicChangeDetection, new NativeShadowDomStrategy(null))]);\n    }\n\n    it('should not create a ProtoView when the isViewRoot flag is not set', () => {\n      var results = createPipeline().process(el('<div></div>'));\n      expect(results[0].inheritedProtoView).toBe(null);\n    });\n\n    it('should create a ProtoView when the isViewRoot flag is set', () => {\n      var viewRootElement = el('<div viewroot></div>');\n      var results = createPipeline().process(viewRootElement);\n      expect(results[0].inheritedProtoView.element).toBe(viewRootElement);\n    });\n\n    it('should inherit the ProtoView down to children that have no isViewRoot set', () => {\n      var viewRootElement = el('<div viewroot><span></span></div>');\n      var results = createPipeline().process(viewRootElement);\n      expect(results[0].inheritedProtoView.element).toBe(viewRootElement);\n      expect(results[1].inheritedProtoView.element).toBe(viewRootElement);\n    });\n\n    it('should save ProtoView into the elementBinder of parent element', () => {\n      var element = el('<div viewroot><template><a viewroot></a></template></div>');\n      var results = createPipeline().process(element);\n      expect(results[1].inheritedElementBinder.nestedProtoView).toBe(results[2].inheritedProtoView);\n    });\n\n    it('should set the parent proto view', () => {\n      var element = el('<div viewroot><template><a viewroot></a></template></div>');\n      var results = createPipeline().process(element);\n\n      var parentProtoView = results[1].inheritedProtoView;\n      var nestedProtoView = results[2].inheritedProtoView;\n      expect(nestedProtoView.parentProtoView).toBe(parentProtoView);\n    });\n\n    it('should bind variables to the nested ProtoView', () => {\n      var element = el('<div viewroot><template var-binding><a viewroot></a></template></div>');\n      var results = createPipeline({\n        'var1': 'map1',\n        'var2': 'map2'\n      }).process(element);\n      var npv = results[1].inheritedElementBinder.nestedProtoView;\n      expect(npv.variableBindings).toEqual(MapWrapper.createFromStringMap({\n        'var1': 'map1',\n        'var2': 'map2'\n      }));\n    });\n\n    it('should mark variables in the proto view context locals', () => {\n      var element = el('<div viewroot><p var-binding></p></div>');\n\n      var results = createPipeline({\n        'var1': 'map1',\n        'var2': 'map2'\n      }).process(element);\n\n      var protoView = results[0].inheritedProtoView;\n      expect(protoView.protoLocals).toEqual(MapWrapper.createFromStringMap({\n        'map2': null,\n        'map1': null\n      }));\n    });\n\n    describe('errors', () => {\n\n      it('should not allow multiple nested ProtoViews for the same parent element', () => {\n        var element = el('<div viewroot><template><a viewroot></a><a viewroot></a></template></div>');\n        expect( () => {\n          createPipeline().process(element);\n        }).toThrowError('Only one nested view per element is allowed');\n      });\n\n    });\n\n  });\n}\n\nclass MockStep extends CompileStep {\n  processClosure:Function;\n  constructor(process) {\n    super();\n    this.processClosure = process;\n  }\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    this.processClosure(parent, current, control);\n  }\n}\n","\n        $__export($__placeholder__0, $__placeholder__1)\n      ","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function($__m) {\n          $__placeholder__0\n        }","$__placeholder__0 = $__m.$__placeholder__1;","$__placeholder__0 = $__placeholder__1","function($__super) {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4, $__super);\n        }($__placeholder__5)","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","assert.argumentTypes($__placeholder__0)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}